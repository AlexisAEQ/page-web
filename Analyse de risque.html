<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outil d'Analyse de Risques Cobotiques</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #b71c1c 0%, #d32f2f 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #b71c1c;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .header p {
            color: #666;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .risk-badge {
            display: inline-block;
            background: #d32f2f;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .container {
            flex: 1;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .analysis-panel {
            background: #fff3e0;
            padding: 1.5rem;
            border-radius: 10px;
            border: 2px solid #ff9800;
        }

        .analysis-panel h3 {
            color: #e65100;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-section {
            background: #f5f5f5;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #ff9800;
        }

        .step-section h4 {
            color: #e65100;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .input-group select, .input-group input, .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group select:focus, .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #ff9800;
        }

        .input-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        .risk-matrix {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 2px;
            margin: 1rem 0;
            background: #ddd;
            border-radius: 8px;
            overflow: hidden;
        }

        .risk-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .risk-cell:hover {
            transform: scale(1.05);
            z-index: 2;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .risk-low { background: #4CAF50; }
        .risk-medium { background: #ff9800; }
        .risk-high { background: #f44336; }
        .risk-critical { background: #b71c1c; }

        .calculate-btn {
            background: #d32f2f;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            background: #b71c1c;
            transform: scale(1.02);
        }

        .results-section {
            grid-column: 1 / -1;
            margin-top: 2rem;
            display: none;
        }

        .risk-result {
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 3px solid;
        }

        .risk-result.low {
            background: #e8f5e8;
            border-color: #4CAF50;
            color: #2e7d32;
        }

        .risk-result.medium {
            background: #fff3e0;
            border-color: #ff9800;
            color: #ef6c00;
        }

        .risk-result.high {
            background: #ffebee;
            border-color: #f44336;
            color: #c62828;
        }

        .risk-result.critical {
            background: #ffebee;
            border-color: #b71c1c;
            color: #b71c1c;
        }

        .risk-score {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
        }

        .risk-actions {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .risk-actions h4 {
            color: #d32f2f;
            margin-bottom: 1rem;
        }

        .risk-actions ul {
            margin-left: 1.5rem;
            line-height: 1.6;
        }

        .risk-actions li {
            margin-bottom: 0.5rem;
        }

        .hazard-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 0.5rem;
            background: white;
        }

        .hazard-item {
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: #f9f9f9;
            border-radius: 4px;
            border-left: 3px solid #ff9800;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hazard-item:hover {
            background: #fff3e0;
            border-left-color: #e65100;
        }

        .hazard-item.selected {
            background: #fff3e0;
            border-left-color: #d32f2f;
        }

        .info-panel {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 2rem;
        }

        .info-panel h3 {
            color: #1976D2;
            margin-bottom: 0.5rem;
        }

        .info-panel p {
            color: #333;
            line-height: 1.5;
            margin: 0;
        }

        .standards-ref {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .standards-ref h4 {
            color: #7b1fa2;
            margin-bottom: 0.5rem;
        }

        .reset-btn {
            background: #607d8b;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #546e7a;
        }

        @media (max-width: 768px) {
            .analysis-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 1rem;
            }
            
            .main-content {
                padding: 1.5rem;
            }
            
            .risk-matrix {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ö†Ô∏è Outil d'Analyse de Risques Cobotiques</h1>
        <p>√âvaluation syst√©matique des risques selon ISO 12100 et normes canadiennes</p>
        <div class="risk-badge">üõ°Ô∏è S√âCURIT√â CRITIQUE</div>
    </div>

    <div class="container">
        <div class="main-content">
            <div class="info-panel">
                <h3>üéØ M√©thodologie d'analyse</h3>
                <p>Cet outil suit la m√©thodologie d'√©valuation des risques conforme aux exigences canadiennes (CSA Z432, CNESST, WSIB) et aux normes internationales (ISO 12100, ISO 10218, ISO/TS 15066). L'analyse couvre l'identification des dangers, l'estimation des risques et la d√©finition des mesures de protection.</p>
            </div>

            <div class="analysis-grid">
                <div class="analysis-panel">
                    <h3>üîç √âtape 1: Identification des Dangers</h3>
                    
                    <div class="step-section">
                        <h4>Application cobotique</h4>
                        <div class="input-group">
                            <label>Type d'application :</label>
                            <select id="applicationType">
                                <option value="">S√©lectionnez...</option>
                                <option value="assemblage">Assemblage collaboratif</option>
                                <option value="pickplace">Pick & Place</option>
                                <option value="soudage">Soudage collaboratif</option>
                                <option value="usinage">Usinage l√©ger</option>
                                <option value="controle">Contr√¥le qualit√©</option>
                                <option value="palettisation">Palettisation</option>
                                <option value="finition">Finition/Polissage</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Mode de collaboration :</label>
                            <select id="collaborationMode">
                                <option value="">S√©lectionnez...</option>
                                <option value="mode1">Mode 1: Arr√™t de s√©curit√© surveill√©</option>
                                <option value="mode2">Mode 2: Guidage manuel</option>
                                <option value="mode3">Mode 3: Surveillance vitesse/s√©paration</option>
                                <option value="mode4">Mode 4: Limitation puissance/force</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Environnement de travail :</label>
                            <select id="environment">
                                <option value="">S√©lectionnez...</option>
                                <option value="atelier">Atelier manufacturier standard</option>
                                <option value="propre">Salle propre/contr√¥l√©e</option>
                                <option value="industriel">Environnement industriel lourd</option>
                                <option value="laboratoire">Laboratoire/R&D</option>
                                <option value="medical">Environnement m√©dical</option>
                            </select>
                        </div>
                    </div>

                    <div class="step-section">
                        <h4>Dangers identifi√©s</h4>
                        <p style="margin-bottom: 1rem; font-size: 0.9rem; color: #666;">Cliquez sur les dangers applicables √† votre installation :</p>
                        <div class="hazard-list" id="hazardList">
                            <!-- G√©n√©r√© par JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="analysis-panel">
                    <h3>üìä √âtape 2: √âvaluation des Risques</h3>
                    
                    <div class="step-section">
                        <h4>Param√®tres de risque</h4>
                        
                        <div class="input-group">
                            <label>Gravit√© des dommages :</label>
                            <select id="severity">
                                <option value="">√âvaluez...</option>
                                <option value="1">1 - N√©gligeable (inconfort l√©ger)</option>
                                <option value="2">2 - Mineure (blessure l√©g√®re)</option>
                                <option value="3">3 - Mod√©r√©e (blessure n√©cessitant soins)</option>
                                <option value="4">4 - Grave (blessure permanente/invalidit√©)</option>
                                <option value="5">5 - Catastrophique (d√©c√®s)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Probabilit√© d'occurrence :</label>
                            <select id="probability">
                                <option value="">√âvaluez...</option>
                                <option value="1">1 - Tr√®s faible (< 1/an)</option>
                                <option value="2">2 - Faible (1-5/an)</option>
                                <option value="3">3 - Mod√©r√©e (5-50/an)</option>
                                <option value="4">4 - √âlev√©e (> 50/an)</option>
                                <option value="5">5 - Tr√®s √©lev√©e (quotidienne)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Fr√©quence d'exposition :</label>
                            <select id="exposure">
                                <option value="">√âvaluez...</option>
                                <option value="1">1 - Rare (< 1h/semaine)</option>
                                <option value="2">2 - Occasionnelle (1h/jour)</option>
                                <option value="3">3 - Fr√©quente (1-4h/jour)</option>
                                <option value="4">4 - Continue (> 4h/jour)</option>
                                <option value="5">5 - Permanente (poste complet)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Possibilit√© d'√©vitement :</label>
                            <select id="avoidance">
                                <option value="">√âvaluez...</option>
                                <option value="1">1 - √âlev√©e (facile √† √©viter)</option>
                                <option value="2">2 - Possible (√©vitable avec attention)</option>
                                <option value="3">3 - Difficile (formation n√©cessaire)</option>
                                <option value="4">4 - Tr√®s difficile (r√©flexes rapides requis)</option>
                                <option value="5">5 - Impossible (pas de possibilit√© d'√©vitement)</option>
                            </select>
                        </div>
                    </div>

                    <div class="step-section">
                        <h4>Matrice de criticit√©</h4>
                        <p style="margin-bottom: 0.5rem; font-size: 0.9rem;">Score = Gravit√© √ó Probabilit√© √ó Exposition √ó √âvitement</p>
                        <div class="risk-matrix" id="riskMatrix">
                            <!-- G√©n√©r√© par JavaScript -->
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #666; margin-top: 0.5rem;">
                            <span>Faible (1-50)</span>
                            <span>Mod√©r√© (51-150)</span>
                            <span>√âlev√© (151-400)</span>
                            <span>Critique (401-625)</span>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateRisk()">‚ö†Ô∏è √âvaluer le Risque</button>
                </div>
            </div>

            <div id="resultsSection" class="results-section">
                <div id="riskResult" class="risk-result">
                    <div id="riskScore" class="risk-score"></div>
                    <div id="riskLevel"></div>
                    <div id="riskDescription"></div>
                </div>

                <div class="risk-actions" id="riskActions">
                    <h4>üõ°Ô∏è Actions de r√©duction des risques</h4>
                    <div id="actionsList"></div>
                </div>

                <div class="standards-ref">
                    <h4>üìã R√©f√©rences normatives applicables</h4>
                    <div id="standardsRef"></div>
                </div>

                <button class="reset-btn" onclick="resetAnalysis()">üîÑ Nouvelle Analyse</button>
            </div>
        </div>
    </div>

    <script>
        // Base de donn√©es des dangers par application
        const hazardDatabase = {
            assemblage: [
                "√âcrasement entre robot et pi√®ce",
                "Cisaillement par l'effecteur",
                "Projection de pi√®ces ou composants",
                "Contact avec outils tranchants",
                "Happement de v√™tements/cheveux",
                "Contraintes posturales",
                "Fatigue visuelle (pr√©cision)",
                "Exposition √† colles/solvants"
            ],
            pickplace: [
                "Impact lors des mouvements rapides",
                "Chute d'objets manipul√©s",
                "√âcrasement pied/main",
                "Collision avec convoyeurs",
                "Surpression pneumatique",
                "Projections de d√©bris",
                "Mouvements r√©p√©titifs",
                "Zones d'acc√®s restreint"
            ],
            soudage: [
                "Br√ªlures par arc/m√©tal chaud",
                "Inhalation de fum√©es",
                "Rayonnement UV/infrarouge",
                "Projections de m√©tal en fusion",
                "√âlectrocution",
                "Incendie/explosion",
                "Contact avec surfaces chaudes",
                "√âmanations toxiques"
            ],
            usinage: [
                "Contact avec outils coupants rotatifs",
                "Projection de copeaux/lubrifiant",
                "Bruit excessif",
                "Vibrations m√©caniques",
                "Poussi√®res m√©talliques",
                "√âcrasement par pi√®ces lourdes",
                "Coupures par bavures",
                "Glissades sur lubrifiant"
            ],
            controle: [
                "Contraintes posturales r√©p√©t√©es",
                "Fatigue visuelle prolong√©e",
                "Exposition radiations (rayons X)",
                "Contact avec produits chimiques",
                "Mouvements pr√©cis r√©p√©titifs",
                "Stress psychologique",
                "Bruit √©quipements mesure",
                "D√©charges √©lectrostatiques"
            ],
            palettisation: [
                "Chute d'objets de hauteur",
                "√âcrasement par charges lourdes",
                "Basculement de palettes",
                "Coincement dans structures",
                "Efforts physiques excessifs",
                "Troubles musculo-squelettiques",
                "Collision avec √©quipements",
                "Instabilit√© des charges"
            ],
            finition: [
                "Inhalation de poussi√®res/vapeurs",
                "Contact avec abrasifs",
                "Projections de produits chimiques",
                "Vibrations outils",
                "Bruit des √©quipements",
                "Contraintes posturales",
                "Irritations cutan√©es",
                "Risques oculaires"
            ]
        };

        // Variables globales
        let selectedHazards = [];
        let currentRiskScore = 0;

        // Initialisation de l'interface
        document.getElementById('applicationType').addEventListener('change', updateHazardList);

        function updateHazardList() {
            const applicationType = document.getElementById('applicationType').value;
            const hazardList = document.getElementById('hazardList');
            
            hazardList.innerHTML = '';
            selectedHazards = [];
            
            if (applicationType && hazardDatabase[applicationType]) {
                hazardDatabase[applicationType].forEach((hazard, index) => {
                    const hazardItem = document.createElement('div');
                    hazardItem.className = 'hazard-item';
                    hazardItem.textContent = hazard;
                    hazardItem.onclick = () => toggleHazard(hazardItem, hazard);
                    hazardList.appendChild(hazardItem);
                });
                
                // Ajouter dangers g√©n√©riques cobots
                const genericHazards = [
                    "D√©faillance capteurs de s√©curit√©",
                    "Erreur de programmation",
                    "Maintenance inad√©quate",
                    "Formation insuffisante op√©rateurs",
                    "Modifications non autoris√©es"
                ];
                
                genericHazards.forEach(hazard => {
                    const hazardItem = document.createElement('div');
                    hazardItem.className = 'hazard-item';
                    hazardItem.style.borderLeftColor = '#607d8b';
                    hazardItem.textContent = '‚öôÔ∏è ' + hazard;
                    hazardItem.onclick = () => toggleHazard(hazardItem, hazard);
                    hazardList.appendChild(hazardItem);
                });
            }
        }

        function toggleHazard(element, hazard) {
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedHazards = selectedHazards.filter(h => h !== hazard);
            } else {
                element.classList.add('selected');
                selectedHazards.push(hazard);
            }
        }

        function calculateRisk() {
            const applicationType = document.getElementById('applicationType').value;
            const collaborationMode = document.getElementById('collaborationMode').value;
            const environment = document.getElementById('environment').value;
            const severity = parseInt(document.getElementById('severity').value);
            const probability = parseInt(document.getElementById('probability').value);
            const exposure = parseInt(document.getElementById('exposure').value);
            const avoidance = parseInt(document.getElementById('avoidance').value);

            // Validation des entr√©es
            if (!applicationType || !collaborationMode || !environment) {
                alert('Veuillez renseigner tous les param√®tres de l\'application.');
                return;
            }

            if (!severity || !probability || !exposure || !avoidance) {
                alert('Veuillez √©valuer tous les param√®tres de risque.');
                return;
            }

            if (selectedHazards.length === 0) {
                alert('Veuillez s√©lectionner au moins un danger identifi√©.');
                return;
            }

            // Calcul du score de risque
            currentRiskScore = severity * probability * exposure * avoidance;

            // D√©termination du niveau de risque
            let riskLevel, riskClass, riskDescription;
            
            if (currentRiskScore <= 50) {
                riskLevel = "RISQUE FAIBLE";
                riskClass = "low";
                riskDescription = "Le risque est acceptable. Surveillance continue recommand√©e.";
            } else if (currentRiskScore <= 150) {
                riskLevel = "RISQUE MOD√âR√â";
                riskClass = "medium";
                riskDescription = "Mesures de r√©duction recommand√©es. Surveillance renforc√©e n√©cessaire.";
            } else if (currentRiskScore <= 400) {
                riskLevel = "RISQUE √âLEV√â";
                riskClass = "high";
                riskDescription = "Actions correctives obligatoires avant mise en service.";
            } else {
                riskLevel = "RISQUE CRITIQUE";
                riskClass = "critical";
                riskDescription = "INACCEPTABLE - R√©vision compl√®te de la conception requise.";
            }

            displayResults(riskLevel, riskClass, riskDescription);
        }

        function displayResults(riskLevel, riskClass, riskDescription) {
            const resultsSection = document.getElementById('resultsSection');
            const riskResult = document.getElementById('riskResult');
            const riskScore = document.getElementById('riskScore');
            const riskLevelDiv = document.getElementById('riskLevel');
            const riskDescriptionDiv = document.getElementById('riskDescription');

            // Affichage du r√©sultat
            riskResult.className = `risk-result ${riskClass}`;
            riskScore.textContent = `Score: ${currentRiskScore}`;
            riskLevelDiv.innerHTML = `<h3>${riskLevel}</h3>`;
            riskDescriptionDiv.textContent = riskDescription;

            // Actions recommand√©es
            generateRiskActions(riskClass);
            
            // R√©f√©rences normatives
            generateStandardsReferences();

            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function generateRiskActions(riskClass) {
            const actionsList = document.getElementById('riskActions');
            let actions = [];

            // Actions selon le niveau de risque
            switch (riskClass) {
                case 'low':
                    actions = [
                        "Maintenir les mesures de s√©curit√© actuelles",
                        "Surveillance p√©riodique des conditions d'exploitation",
                        "Formation continue des op√©rateurs",
                        "R√©vision annuelle de l'analyse de risques",
                        "Documentation des proc√©dures de s√©curit√©"
                    ];
                    break;

                case 'medium':
                    actions = [
                        "Installer des √©quipements de protection compl√©mentaires",
                        "Renforcer la formation des op√©rateurs (certification)",
                        "Mettre en place une surveillance renforc√©e",
                        "D√©finir des proc√©dures d'urgence sp√©cifiques",
                        "Effectuer des tests de s√©curit√© trimestriels",
                        "Envisager des modifications ergonomiques"
                    ];
                    break;

                case 'high':
                    actions = [
                        "üö® ACTIONS CORRECTIVES OBLIGATOIRES:",
                        "Installer des barri√®res de s√©curit√© suppl√©mentaires",
                        "R√©duire les vitesses op√©rationnelles",
                        "Impl√©menter des syst√®mes de s√©curit√© redondants",
                        "Formation intensive avec certification obligatoire",
                        "Supervision permanente pendant l'exploitation",
                        "Tests de s√©curit√© hebdomadaires",
                        "Audit de s√©curit√© par organisme externe"
                    ];
                    break;

                case 'critical':
                    actions = [
                        "üõë ARR√äT IMM√âDIAT DE L'INSTALLATION",
                        "R√©vision compl√®te de la conception",
                        "√âvaluation par expert en s√©curit√© cobotique",
                        "Modifications majeures des syst√®mes de s√©curit√©",
                        "Tests de validation complets",
                        "Certification par organisme agr√©√© obligatoire",
                        "Formation sp√©cialis√©e de toutes les √©quipes",
                        "Mise en place d'un plan de surveillance permanent"
                    ];
                    break;
            }

            // Actions sp√©cifiques aux dangers s√©lectionn√©s
            if (selectedHazards.includes("D√©faillance capteurs de s√©curit√©")) {
                actions.push("Impl√©menter une architecture de s√©curit√© redondante (ISO 13849 PLd)");
            }
            if (selectedHazards.includes("Erreur de programmation")) {
                actions.push("Validation des programmes par double contr√¥le");
            }
            if (selectedHazards.includes("Formation insuffisante op√©rateurs")) {
                actions.push("Programme de formation certifiant selon CNESST/WSIB");
            }

            const actionsHTML = `
                <ul>
                    ${actions.map(action => `<li>${action}</li>`).join('')}
                </ul>
                
                <h5 style="margin-top: 1.5rem; color: #d32f2f;">üéØ Hi√©rarchie des mesures de protection (ISO 12100):</h5>
                <ol style="margin-left: 1.5rem; line-height: 1.6;">
                    <li><strong>√âlimination:</strong> Supprimer le danger √† la source</li>
                    <li><strong>Substitution:</strong> Remplacer par une solution moins dangereuse</li>
                    <li><strong>Protection collective:</strong> Barri√®res, capteurs de s√©curit√©</li>
                    <li><strong>Protection individuelle:</strong> EPI sp√©cifiques</li>
                    <li><strong>Formation/Information:</strong> Proc√©dures et sensibilisation</li>
                </ol>
            `;

            actionsList.innerHTML = `<h4>üõ°Ô∏è Actions de r√©duction des risques</h4>${actionsHTML}`;
        }

        function generateStandardsReferences() {
            const collaborationMode = document.getElementById('collaborationMode').value;
            const environment = document.getElementById('environment').value;
            
            let standards = [
                "üìã <strong>ISO 12100</strong> - S√©curit√© des machines (Principes g√©n√©raux)",
                "ü§ñ <strong>ISO 10218-1/2</strong> - Robots industriels (Exigences de s√©curit√©)",
                "ü§ù <strong>ISO/TS 15066</strong> - Robots collaboratifs (Sp√©cifications techniques)",
                "üá®üá¶ <strong>CSA Z432</strong> - Protection des machines (Canada)",
                "‚öñÔ∏è <strong>CSA Z434</strong> - S√©curit√© des machines industrielles"
            ];

            // Standards sp√©cifiques selon le contexte
            if (collaborationMode === 'mode4') {
                standards.push("üí™ <strong>ISO/TS 15066 Annexe A</strong> - Limites de force et pression");
            }

            if (environment === 'medical') {
                standards.push("üè• <strong>IEC 60601-1</strong> - √âquipements √©lectrom√©dicaux");
            }

            // Standards provinciaux canadiens
            standards.push("üèõÔ∏è <strong>CNESST (Qu√©bec)</strong> - Loi sur la sant√© et s√©curit√© du travail");
            standards.push("üèõÔ∏è <strong>WSIB (Ontario)</strong> - Workplace Safety and Insurance Act");

            // Standards de certification
            standards.push("‚úÖ <strong>Certification CSA</strong> - Marquage obligatoire Canada");
            standards.push("üîç <strong>√âvaluation de conformit√©</strong> - Organismes agr√©√©s (T√úV, CSA Group)");

            const standardsHTML = `
                <ul style="line-height: 1.8;">
                    ${standards.map(std => `<li>${std}</li>`).join('')}
                </ul>
                
                <div style="margin-top: 1rem; padding: 1rem; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                    <strong>‚ö†Ô∏è Important :</strong> Cette analyse doit √™tre valid√©e par un expert en s√©curit√© cobotique 
                    et compl√©t√©e par des tests pratiques selon les normes applicables.
                </div>
            `;

            document.getElementById('standardsRef').innerHTML = standardsHTML;
        }

        function resetAnalysis() {
            // R√©initialiser tous les champs
            document.getElementById('applicationType').value = '';
            document.getElementById('collaborationMode').value = '';
            document.getElementById('environment').value = '';
            document.getElementById('severity').value = '';
            document.getElementById('probability').value = '';
            document.getElementById('exposure').value = '';
            document.getElementById('avoidance').value = '';

            // R√©initialiser la liste des dangers
            document.getElementById('hazardList').innerHTML = '';
            selectedHazards = [];
            currentRiskScore = 0;

            // Masquer les r√©sultats
            document.getElementById('resultsSection').style.display = 'none';

            // Remonter en haut
            window.scrollTo(0, 0);
        }

        // G√©n√©ration de la matrice de risque visuelle
        function generateRiskMatrix() {
            const riskMatrix = document.getElementById('riskMatrix');
            const matrixData = [
                { score: 5, class: 'risk-low', label: '5' },
                { score: 10, class: 'risk-low', label: '10' },
                { score: 15, class: 'risk-low', label: '15' },
                { score: 20, class: 'risk-low', label: '20' },
                { score: 25, class: 'risk-low', label: '25' },
                
                { score: 50, class: 'risk-low', label: '50' },
                { score: 75, class: 'risk-medium', label: '75' },
                { score: 100, class: 'risk-medium', label: '100' },
                { score: 125, class: 'risk-medium', label: '125' },
                { score: 150, class: 'risk-medium', label: '150' },
                
                { score: 200, class: 'risk-high', label: '200' },
                { score: 250, class: 'risk-high', label: '250' },
                { score: 300, class: 'risk-high', label: '300' },
                { score: 350, class: 'risk-high', label: '350' },
                { score: 400, class: 'risk-high', label: '400' },
                
                { score: 450, class: 'risk-critical', label: '450' },
                { score: 500, class: 'risk-critical', label: '500' },
                { score: 550, class: 'risk-critical', label: '550' },
                { score: 600, class: 'risk-critical', label: '600' },
                { score: 625, class: 'risk-critical', label: '625' }
            ];

            riskMatrix.innerHTML = '';
            matrixData.forEach(item => {
                const cell = document.createElement('div');
                cell.className = `risk-cell ${item.class}`;
                cell.textContent = item.label;
                cell.title = `Score: ${item.score}`;
                riskMatrix.appendChild(cell);
            });
        }

        // Initialisation au chargement de la page
        window.onload = function() {
            generateRiskMatrix();
        };
    </script>
</body>
</html>